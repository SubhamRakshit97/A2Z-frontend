{"ast":null,"code":"import initialState from \"../store/initialState\";\nimport * as Actions from \"./actions\";\nexport const CartsReducer = (state = initialState.carts, action) => {\n  switch (action.type) {\n    case Actions.FETCH_CARTS:\n      return { ...state,\n        results: action.payload.carts,\n        totalPrice: getTotalCartPrice(action.payload.carts),\n        totalCart: action.payload.carts.length,\n        totalCartItems: getTotalCartItems(action.payload.carts)\n      };\n\n    case Actions.ADD_CART:\n      const newAddedCarts = [...state.results, action.payload.cart];\n      return { ...state,\n        results: newAddedCarts,\n        totalPrice: getTotalCartPrice(newAddedCarts),\n        totalCart: newAddedCarts.length,\n        totalCartItems: getTotalCartItems(newAddedCarts)\n      };\n\n    case Actions.UPDATE_CART:\n      const prevCarts = state.results;\n      const newUpdatedCarts = prevCarts.map(cart => {\n        if (cart.id === action.payload.cart.id) {\n          cart.quantity = action.payload.cart.quantity;\n          cart.total_price = action.payload.cart.quantity * cart.product.price;\n        }\n\n        return cart;\n      });\n      return { ...state,\n        results: newUpdatedCarts,\n        totalPrice: getTotalCartPrice(newUpdatedCarts),\n        totalCart: newUpdatedCarts.length,\n        totalCartItems: getTotalCartItems(newUpdatedCarts)\n      };\n\n    case Actions.REMOVE_CART:\n      const newRemovedCarts = state.results.filter(cart => cart.id !== action.payload.cartId);\n      return { ...state,\n        results: newRemovedCarts,\n        totalPrice: getTotalCartPrice(newRemovedCarts),\n        totalCart: newRemovedCarts.length,\n        totalCartItems: getTotalCartItems(newRemovedCarts)\n      };\n\n    case Actions.CLEAR_CARTS:\n      return { ...state,\n        results: [],\n        totalPrice: 0,\n        totalCart: 0,\n        totalCartItems: 0\n      };\n\n    default:\n      return state;\n  }\n};\n_c = CartsReducer;\n\nconst getTotalCartPrice = carts => {\n  if (carts.length > 0) {\n    const totalPrice = carts.reduce((prev, cur) => prev + cur.total_price, 0);\n    return +totalPrice.toFixed(2);\n  }\n\n  return 0;\n};\n\nconst getTotalCartItems = carts => {\n  if (carts.length > 0) {\n    const totalCartItems = carts.reduce((prev, cur) => prev + cur.quantity, 0);\n    return totalCartItems;\n  }\n\n  return 0;\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"CartsReducer\");","map":{"version":3,"names":["initialState","Actions","CartsReducer","state","carts","action","type","FETCH_CARTS","results","payload","totalPrice","getTotalCartPrice","totalCart","length","totalCartItems","getTotalCartItems","ADD_CART","newAddedCarts","cart","UPDATE_CART","prevCarts","newUpdatedCarts","map","id","quantity","total_price","product","price","REMOVE_CART","newRemovedCarts","filter","cartId","CLEAR_CARTS","reduce","prev","cur","toFixed"],"sources":["/Users/musubimanagement/Desktop/A2Z frontend/src/reducks/cart/reducers.js"],"sourcesContent":["import initialState from \"../store/initialState\";\nimport * as Actions from \"./actions\";\n\nexport const CartsReducer = (state = initialState.carts, action) => {\n\tswitch (action.type) {\n\t\tcase Actions.FETCH_CARTS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: action.payload.carts,\n\t\t\t\ttotalPrice: getTotalCartPrice(action.payload.carts),\n\t\t\t\ttotalCart: action.payload.carts.length,\n\t\t\t\ttotalCartItems: getTotalCartItems(action.payload.carts),\n\t\t\t};\n\n\t\tcase Actions.ADD_CART:\n\t\t\tconst newAddedCarts = [...state.results, action.payload.cart];\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: newAddedCarts,\n\t\t\t\ttotalPrice: getTotalCartPrice(newAddedCarts),\n\t\t\t\ttotalCart: newAddedCarts.length,\n\t\t\t\ttotalCartItems: getTotalCartItems(newAddedCarts),\n\t\t\t};\n\n\t\tcase Actions.UPDATE_CART:\n\t\t\tconst prevCarts = state.results;\n\t\t\tconst newUpdatedCarts = prevCarts.map((cart) => {\n\t\t\t\tif (cart.id === action.payload.cart.id) {\n\t\t\t\t\tcart.quantity = action.payload.cart.quantity;\n\t\t\t\t\tcart.total_price = action.payload.cart.quantity * cart.product.price;\n\t\t\t\t}\n\t\t\t\treturn cart;\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: newUpdatedCarts,\n\t\t\t\ttotalPrice: getTotalCartPrice(newUpdatedCarts),\n\t\t\t\ttotalCart: newUpdatedCarts.length,\n\t\t\t\ttotalCartItems: getTotalCartItems(newUpdatedCarts),\n\t\t\t};\n\t\tcase Actions.REMOVE_CART:\n\t\t\tconst newRemovedCarts = state.results.filter((cart) => cart.id !== action.payload.cartId);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: newRemovedCarts,\n\t\t\t\ttotalPrice: getTotalCartPrice(newRemovedCarts),\n\t\t\t\ttotalCart: newRemovedCarts.length,\n\t\t\t\ttotalCartItems: getTotalCartItems(newRemovedCarts),\n\t\t\t};\n\t\tcase Actions.CLEAR_CARTS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: [],\n\t\t\t\ttotalPrice: 0,\n\t\t\t\ttotalCart: 0,\n\t\t\t\ttotalCartItems: 0,\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst getTotalCartPrice = (carts) => {\n\tif (carts.length > 0) {\n\t\tconst totalPrice = carts.reduce((prev, cur) => prev + cur.total_price, 0);\n\t\treturn +totalPrice.toFixed(2);\n\t}\n\treturn 0;\n};\n\nconst getTotalCartItems = (carts) => {\n\tif (carts.length > 0) {\n\t\tconst totalCartItems = carts.reduce((prev, cur) => prev + cur.quantity, 0);\n\t\treturn totalCartItems;\n\t}\n\treturn 0;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}