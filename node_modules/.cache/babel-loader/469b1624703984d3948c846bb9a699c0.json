{"ast":null,"code":"import API, { LOGIN_USER_KEY } from '../../API';\nimport { clearErrorsAction, signInAction, signInError, signUpAction, signUpError, signUserStoreAction } from './actions';\nconst api = new API();\nexport const fetchUserFromLocalStorage = () => {\n  return dispatch => {\n    const userJSON = localStorage.getItem(LOGIN_USER_KEY);\n\n    if (userJSON && userJSON.token !== \"\") {\n      dispatch(signUserStoreAction(JSON.parse(userJSON)));\n    }\n  };\n};\nexport const signUp = (data = {}, onSuccess = null) => {\n  return async dispatch => {\n    return api.signUp(data).then(response => {\n      localStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\n      dispatch(signUpAction(response));\n      onSuccess();\n      clearErrorsAction();\n    }).catch(error => {\n      dispatch(signUpError(error.response.data));\n    });\n  };\n};\nexport const signIn = (data = {}, onSuccess = null) => {\n  return async dispatch => {\n    return api.signIn(data).then(response => {\n      localStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\n      dispatch(signInAction(response));\n      onSuccess();\n      clearErrorsAction();\n    }).catch(error => {\n      dispatch(signInError(error.response.data));\n    });\n  };\n};","map":{"version":3,"names":["API","LOGIN_USER_KEY","clearErrorsAction","signInAction","signInError","signUpAction","signUpError","signUserStoreAction","api","fetchUserFromLocalStorage","dispatch","userJSON","localStorage","getItem","token","JSON","parse","signUp","data","onSuccess","then","response","setItem","stringify","catch","error","signIn"],"sources":["/Users/musubimanagement/Desktop/A2Z frontend/src/reducks/users/operations.js"],"sourcesContent":["import API, { LOGIN_USER_KEY } from '../../API';\nimport { clearErrorsAction, signInAction, signInError, signUpAction, signUpError, signUserStoreAction } from './actions';\n\nconst api = new API();\n\nexport const fetchUserFromLocalStorage = () => {\n\treturn (dispatch) => {\n\t\tconst userJSON = localStorage.getItem(LOGIN_USER_KEY);\n\t\tif (userJSON && userJSON.token !== \"\") {\n\t\t\tdispatch(signUserStoreAction(JSON.parse(userJSON)));\n\t\t}\n\t};\n};\n\nexport const signUp = (data = {}, onSuccess = null) => {\n\treturn async (dispatch) => {\n\t\treturn api\n\t\t\t.signUp(data)\n\t\t\t.then((response) => {\n\t\t\t\tlocalStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\n\t\t\t\tdispatch(signUpAction(response));\n\t\t\t\tonSuccess();\n\t\t\t\tclearErrorsAction()\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tdispatch(signUpError(error.response.data));\n\t\t\t});\n\t};\n};\n\nexport const signIn = (data = {}, onSuccess = null) => {\n\treturn async (dispatch) => {\n\t\treturn api\n\t\t\t.signIn(data)\n\t\t\t.then((response) => {\n\t\t\t\tlocalStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\n\t\t\t\tdispatch(signInAction(response));\n\t\t\t\tonSuccess();\n\t\t\t\tclearErrorsAction()\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tdispatch(signInError(error.response.data));\n\t\t\t});\n\t};\n};\n"],"mappings":"AAAA,OAAOA,GAAP,IAAcC,cAAd,QAAoC,WAApC;AACA,SAASC,iBAAT,EAA4BC,YAA5B,EAA0CC,WAA1C,EAAuDC,YAAvD,EAAqEC,WAArE,EAAkFC,mBAAlF,QAA6G,WAA7G;AAEA,MAAMC,GAAG,GAAG,IAAIR,GAAJ,EAAZ;AAEA,OAAO,MAAMS,yBAAyB,GAAG,MAAM;EAC9C,OAAQC,QAAD,IAAc;IACpB,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqBZ,cAArB,CAAjB;;IACA,IAAIU,QAAQ,IAAIA,QAAQ,CAACG,KAAT,KAAmB,EAAnC,EAAuC;MACtCJ,QAAQ,CAACH,mBAAmB,CAACQ,IAAI,CAACC,KAAL,CAAWL,QAAX,CAAD,CAApB,CAAR;IACA;EACD,CALD;AAMA,CAPM;AASP,OAAO,MAAMM,MAAM,GAAG,CAACC,IAAI,GAAG,EAAR,EAAYC,SAAS,GAAG,IAAxB,KAAiC;EACtD,OAAO,MAAOT,QAAP,IAAoB;IAC1B,OAAOF,GAAG,CACRS,MADK,CACEC,IADF,EAELE,IAFK,CAECC,QAAD,IAAc;MACnBT,YAAY,CAACU,OAAb,CAAqBrB,cAArB,EAAqCc,IAAI,CAACQ,SAAL,CAAeF,QAAf,CAArC;MACAX,QAAQ,CAACL,YAAY,CAACgB,QAAD,CAAb,CAAR;MACAF,SAAS;MACTjB,iBAAiB;IACjB,CAPK,EAQLsB,KARK,CAQEC,KAAD,IAAW;MACjBf,QAAQ,CAACJ,WAAW,CAACmB,KAAK,CAACJ,QAAN,CAAeH,IAAhB,CAAZ,CAAR;IACA,CAVK,CAAP;EAWA,CAZD;AAaA,CAdM;AAgBP,OAAO,MAAMQ,MAAM,GAAG,CAACR,IAAI,GAAG,EAAR,EAAYC,SAAS,GAAG,IAAxB,KAAiC;EACtD,OAAO,MAAOT,QAAP,IAAoB;IAC1B,OAAOF,GAAG,CACRkB,MADK,CACER,IADF,EAELE,IAFK,CAECC,QAAD,IAAc;MACnBT,YAAY,CAACU,OAAb,CAAqBrB,cAArB,EAAqCc,IAAI,CAACQ,SAAL,CAAeF,QAAf,CAArC;MACAX,QAAQ,CAACP,YAAY,CAACkB,QAAD,CAAb,CAAR;MACAF,SAAS;MACTjB,iBAAiB;IACjB,CAPK,EAQLsB,KARK,CAQEC,KAAD,IAAW;MACjBf,QAAQ,CAACN,WAAW,CAACqB,KAAK,CAACJ,QAAN,CAAeH,IAAhB,CAAZ,CAAR;IACA,CAVK,CAAP;EAWA,CAZD;AAaA,CAdM"},"metadata":{},"sourceType":"module"}