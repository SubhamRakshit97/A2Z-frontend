{"ast":null,"code":"import axios from \"axios\";\nexport const LOGIN_USER_KEY = \"HIVE_TECHWEAR_LOGIN_USER_KEY\";\nvar baseURL;\n\nif (process.env.REACT_APP_ENVIRONMENT && process.env.REACT_APP_ENVIRONMENT === \"PRODUCTION\") {\n  baseURL = process.env.REACT_APP_API_BASE_URL;\n} else {\n  baseURL = \"https://a2z-backend-app.herokuapp.com/\";\n} // if (\n//   process.env.REACT_APP_ENVIRONMENT &&\n//   process.env.REACT_APP_ENVIRONMENT === \"PRODUCTION\"\n// ) {\n//   baseURL = process.env.REACT_APP_API_BASE_URL;\n// } else {\n//   baseURL = \"http://127.0.0.1:8002/\";\n// }\n\n\nconst api = axios.create({\n  baseURL: baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\napi.interceptors.request.use(config => {\n  if (config.requireToken) {\n    const user = localStorage.getItem(LOGIN_USER_KEY) ? JSON.parse(localStorage.getItem(LOGIN_USER_KEY)) : null;\n    config.headers.common[\"Authorization\"] = user.token;\n  }\n\n  return config;\n}, err => console.error(err));\napi.interceptors.response.use(response => {\n  return response.data;\n}, error => {\n  console.log(\"error.response\", error);\n\n  if (error.response.status === 401) {\n    localStorage.removeItem(LOGIN_USER_KEY);\n  }\n\n  return Promise.reject(error);\n});\nexport default class API {\n  constructor() {\n    this.signUp = async signUpBody => {\n      const formData = new FormData();\n\n      for (const key in signUpBody) {\n        formData.append(key, signUpBody[key]);\n      }\n\n      return api.post(\"/users/signup/\", formData);\n    };\n\n    this.signIn = async signInBody => {\n      const formData = new FormData();\n\n      for (const key in signInBody) {\n        formData.append(key, signInBody[key]);\n      }\n\n      return api.post(\"/users/signin/\", formData);\n    };\n\n    this.getCategories = () => {\n      return api.get(\"/categories/\");\n    };\n\n    this.getProducts = (query = {}) => {\n      return api.get(\"/products/\", {\n        params: query,\n        requireToken: true\n      });\n    };\n\n    this.getCarts = (query = {}) => {\n      return api.get(\"/carts/\", {\n        params: query,\n        requireToken: true\n      });\n    };\n\n    this.addCart = addCartBody => {\n      const formData = new FormData();\n\n      for (const key in addCartBody) {\n        formData.append(key, addCartBody[key]);\n      }\n\n      return api.post(\"/carts/add/\", formData, {\n        requireToken: true\n      });\n    };\n\n    this.updateCart = (updateCartBody, cartId) => {\n      const formData = new FormData();\n\n      for (const key in updateCartBody) {\n        formData.append(key, updateCartBody[key]);\n      }\n\n      return api.put(`/carts/update/${cartId}/`, formData, {\n        requireToken: true\n      });\n    };\n\n    this.checkoutOrder = checkoutOrderBody => {\n      return api.post(\"/orders/add/\", checkoutOrderBody, {\n        requireToken: true\n      });\n    };\n  }\n\n}","map":{"version":3,"names":["axios","LOGIN_USER_KEY","baseURL","process","env","REACT_APP_ENVIRONMENT","REACT_APP_API_BASE_URL","api","create","headers","interceptors","request","use","config","requireToken","user","localStorage","getItem","JSON","parse","common","token","err","console","error","response","data","log","status","removeItem","Promise","reject","API","signUp","signUpBody","formData","FormData","key","append","post","signIn","signInBody","getCategories","get","getProducts","query","params","getCarts","addCart","addCartBody","updateCart","updateCartBody","cartId","put","checkoutOrder","checkoutOrderBody"],"sources":["/Users/musubimanagement/Desktop/A2Z frontend/src/API.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const LOGIN_USER_KEY = \"HIVE_TECHWEAR_LOGIN_USER_KEY\";\n\nvar baseURL;\nif (\n  process.env.REACT_APP_ENVIRONMENT &&\n  process.env.REACT_APP_ENVIRONMENT === \"PRODUCTION\"\n) {\n  baseURL = process.env.REACT_APP_API_BASE_URL;\n} else {\n  baseURL = \"https://a2z-backend-app.herokuapp.com/\";\n}\n// if (\n//   process.env.REACT_APP_ENVIRONMENT &&\n//   process.env.REACT_APP_ENVIRONMENT === \"PRODUCTION\"\n// ) {\n//   baseURL = process.env.REACT_APP_API_BASE_URL;\n// } else {\n//   baseURL = \"http://127.0.0.1:8002/\";\n// }\n\nconst api = axios.create({\n  baseURL: baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\napi.interceptors.request.use(\n  (config) => {\n    if (config.requireToken) {\n      const user = localStorage.getItem(LOGIN_USER_KEY)\n        ? JSON.parse(localStorage.getItem(LOGIN_USER_KEY))\n        : null;\n      config.headers.common[\"Authorization\"] = user.token;\n    }\n\n    return config;\n  },\n  (err) => console.error(err)\n);\n\napi.interceptors.response.use(\n  (response) => {\n    return response.data;\n  },\n  (error) => {\n    console.log(\"error.response\", error);\n    if (error.response.status === 401) {\n      localStorage.removeItem(LOGIN_USER_KEY);\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default class API {\n  signUp = async (signUpBody) => {\n    const formData = new FormData();\n\n    for (const key in signUpBody) {\n      formData.append(key, signUpBody[key]);\n    }\n\n    return api.post(\"/users/signup/\", formData);\n  };\n\n  signIn = async (signInBody) => {\n    const formData = new FormData();\n    for (const key in signInBody) {\n      formData.append(key, signInBody[key]);\n    }\n    return api.post(\"/users/signin/\", formData);\n  };\n\n  // Category\n  getCategories = () => {\n    return api.get(\"/categories/\");\n  };\n\n  // Product\n  getProducts = (query = {}) => {\n    return api.get(\"/products/\", { params: query, requireToken: true });\n  };\n\n  // Cart\n  getCarts = (query = {}) => {\n    return api.get(\"/carts/\", { params: query, requireToken: true });\n  };\n\n  addCart = (addCartBody) => {\n    const formData = new FormData();\n    for (const key in addCartBody) {\n      formData.append(key, addCartBody[key]);\n    }\n    return api.post(\"/carts/add/\", formData, { requireToken: true });\n  };\n\n  updateCart = (updateCartBody, cartId) => {\n    const formData = new FormData();\n    for (const key in updateCartBody) {\n      formData.append(key, updateCartBody[key]);\n    }\n    return api.put(`/carts/update/${cartId}/`, formData, {\n      requireToken: true,\n    });\n  };\n\n  // Checkout\n  checkoutOrder = (checkoutOrderBody) => {\n    return api.post(\"/orders/add/\", checkoutOrderBody, { requireToken: true });\n  };\n}\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,cAAc,GAAG,8BAAvB;AAEP,IAAIC,OAAJ;;AACA,IACEC,OAAO,CAACC,GAAR,CAAYC,qBAAZ,IACAF,OAAO,CAACC,GAAR,CAAYC,qBAAZ,KAAsC,YAFxC,EAGE;EACAH,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYE,sBAAtB;AACD,CALD,MAKO;EACLJ,OAAO,GAAG,wCAAV;AACD,C,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,MAAMK,GAAG,GAAGP,KAAK,CAACQ,MAAN,CAAa;EACvBN,OAAO,EAAEA,OADc;EAEvBO,OAAO,EAAE;IACP,gBAAgB;EADT;AAFc,CAAb,CAAZ;AAOAF,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CACGC,MAAD,IAAY;EACV,IAAIA,MAAM,CAACC,YAAX,EAAyB;IACvB,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqBhB,cAArB,IACTiB,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqBhB,cAArB,CAAX,CADS,GAET,IAFJ;IAGAY,MAAM,CAACJ,OAAP,CAAeW,MAAf,CAAsB,eAAtB,IAAyCL,IAAI,CAACM,KAA9C;EACD;;EAED,OAAOR,MAAP;AACD,CAVH,EAWGS,GAAD,IAASC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAXX;AAcAf,GAAG,CAACG,YAAJ,CAAiBe,QAAjB,CAA0Bb,GAA1B,CACGa,QAAD,IAAc;EACZ,OAAOA,QAAQ,CAACC,IAAhB;AACD,CAHH,EAIGF,KAAD,IAAW;EACTD,OAAO,CAACI,GAAR,CAAY,gBAAZ,EAA8BH,KAA9B;;EACA,IAAIA,KAAK,CAACC,QAAN,CAAeG,MAAf,KAA0B,GAA9B,EAAmC;IACjCZ,YAAY,CAACa,UAAb,CAAwB5B,cAAxB;EACD;;EAED,OAAO6B,OAAO,CAACC,MAAR,CAAeP,KAAf,CAAP;AACD,CAXH;AAcA,eAAe,MAAMQ,GAAN,CAAU;EAAA;IAAA,KACvBC,MADuB,GACd,MAAOC,UAAP,IAAsB;MAC7B,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;MAEA,KAAK,MAAMC,GAAX,IAAkBH,UAAlB,EAA8B;QAC5BC,QAAQ,CAACG,MAAT,CAAgBD,GAAhB,EAAqBH,UAAU,CAACG,GAAD,CAA/B;MACD;;MAED,OAAO9B,GAAG,CAACgC,IAAJ,CAAS,gBAAT,EAA2BJ,QAA3B,CAAP;IACD,CATsB;;IAAA,KAWvBK,MAXuB,GAWd,MAAOC,UAAP,IAAsB;MAC7B,MAAMN,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;MACA,KAAK,MAAMC,GAAX,IAAkBI,UAAlB,EAA8B;QAC5BN,QAAQ,CAACG,MAAT,CAAgBD,GAAhB,EAAqBI,UAAU,CAACJ,GAAD,CAA/B;MACD;;MACD,OAAO9B,GAAG,CAACgC,IAAJ,CAAS,gBAAT,EAA2BJ,QAA3B,CAAP;IACD,CAjBsB;;IAAA,KAoBvBO,aApBuB,GAoBP,MAAM;MACpB,OAAOnC,GAAG,CAACoC,GAAJ,CAAQ,cAAR,CAAP;IACD,CAtBsB;;IAAA,KAyBvBC,WAzBuB,GAyBT,CAACC,KAAK,GAAG,EAAT,KAAgB;MAC5B,OAAOtC,GAAG,CAACoC,GAAJ,CAAQ,YAAR,EAAsB;QAAEG,MAAM,EAAED,KAAV;QAAiB/B,YAAY,EAAE;MAA/B,CAAtB,CAAP;IACD,CA3BsB;;IAAA,KA8BvBiC,QA9BuB,GA8BZ,CAACF,KAAK,GAAG,EAAT,KAAgB;MACzB,OAAOtC,GAAG,CAACoC,GAAJ,CAAQ,SAAR,EAAmB;QAAEG,MAAM,EAAED,KAAV;QAAiB/B,YAAY,EAAE;MAA/B,CAAnB,CAAP;IACD,CAhCsB;;IAAA,KAkCvBkC,OAlCuB,GAkCZC,WAAD,IAAiB;MACzB,MAAMd,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;MACA,KAAK,MAAMC,GAAX,IAAkBY,WAAlB,EAA+B;QAC7Bd,QAAQ,CAACG,MAAT,CAAgBD,GAAhB,EAAqBY,WAAW,CAACZ,GAAD,CAAhC;MACD;;MACD,OAAO9B,GAAG,CAACgC,IAAJ,CAAS,aAAT,EAAwBJ,QAAxB,EAAkC;QAAErB,YAAY,EAAE;MAAhB,CAAlC,CAAP;IACD,CAxCsB;;IAAA,KA0CvBoC,UA1CuB,GA0CV,CAACC,cAAD,EAAiBC,MAAjB,KAA4B;MACvC,MAAMjB,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;MACA,KAAK,MAAMC,GAAX,IAAkBc,cAAlB,EAAkC;QAChChB,QAAQ,CAACG,MAAT,CAAgBD,GAAhB,EAAqBc,cAAc,CAACd,GAAD,CAAnC;MACD;;MACD,OAAO9B,GAAG,CAAC8C,GAAJ,CAAS,iBAAgBD,MAAO,GAAhC,EAAoCjB,QAApC,EAA8C;QACnDrB,YAAY,EAAE;MADqC,CAA9C,CAAP;IAGD,CAlDsB;;IAAA,KAqDvBwC,aArDuB,GAqDNC,iBAAD,IAAuB;MACrC,OAAOhD,GAAG,CAACgC,IAAJ,CAAS,cAAT,EAAyBgB,iBAAzB,EAA4C;QAAEzC,YAAY,EAAE;MAAhB,CAA5C,CAAP;IACD,CAvDsB;EAAA;;AAAA"},"metadata":{},"sourceType":"module"}